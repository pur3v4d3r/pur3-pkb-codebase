/*
═══════════════════════════════════════════════════════════
 SNIPPET NAME: Mermaid Chart Enhancer
 Purpose: Makes Mermaid diagrams larger and scrollable
          for better visibility of complex charts
 Author: Pur3v4d3r
 Date: 2025-12-23
 Obsidian Version: 1.5+
 Installation: Place in .obsidian/snippets/ and enable in Settings
═══════════════════════════════════════════════════════════
*/

/* ═══════════════════════════════════════════════════════════
   SECTION 1: Container Sizing
   Removes restrictive max-width and allows charts to breathe
   ═══════════════════════════════════════════════════════════ */

/* Main Mermaid container - allow full width expansion */
.markdown-preview-view .mermaid,
.markdown-rendered .mermaid,
.markdown-source-view .mermaid {
  max-width: 100% !important;
  width: 100% !important;
  overflow-x: auto !important;
  overflow-y: visible !important;
  padding: 1rem;
  margin: 1rem 0;
}

/* SVG inside Mermaid - remove restrictive sizing */
.mermaid svg {
  max-width: none !important;
  min-width: 100%;
  height: auto !important;
  min-height: 300px;
}

/* ═══════════════════════════════════════════════════════════
   SECTION 2: Zoom/Scale Controls
   Adjust these values to set your preferred default scale
   ═══════════════════════════════════════════════════════════ */

/* 
   CUSTOMIZATION TIP: 
   Change the scale value below to adjust default chart size
   - 1.0 = normal size
   - 1.25 = 25% larger
   - 1.5 = 50% larger
   - 2.0 = double size
*/
.mermaid svg {
  transform: scale(1.25);
  transform-origin: top left;
}

/* Compensate container for scaled content */
.markdown-preview-view .mermaid,
.markdown-rendered .mermaid {
  /* Adjust min-height based on your scale factor */
  min-height: 400px;
}

/* ═══════════════════════════════════════════════════════════
   SECTION 3: Text Readability Enhancements
   Makes labels and text in diagrams more legible
   ═══════════════════════════════════════════════════════════ */

/* Increase base font size in Mermaid diagrams */
.mermaid text,
.mermaid .nodeLabel,
.mermaid .edgeLabel,
.mermaid .label {
  font-size: 14px !important;
  font-weight: 500 !important;
}

/* Flowchart node text */
.mermaid .node rect + .label,
.mermaid .node .nodeLabel {
  font-size: 14px !important;
  
}

/* Edge/arrow labels */
.mermaid .edgeLabel {
  font-size: 13px !important;
  background-color: var(--background-primary) !important;
  padding: 2px 6px !important;
  border-radius: 4px;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1) !important;

}

/* Sequence diagram text */
.mermaid .messageText,
.mermaid .actor {
  font-size: 14px !important;
  
}

/* ═══════════════════════════════════════════════════════════
   SECTION 4: Scrollable Container with Visual Cues
   Shows when chart is scrollable
   ═══════════════════════════════════════════════════════════ */

/* Add subtle border when scrollable */
.markdown-preview-view .mermaid:has(svg) {
  border: 1px solid var(--background-modifier-border);
  border-radius: 8px;
  background-color: var(--background-secondary);
}

/* Fade indicator for horizontal scroll */
.markdown-preview-view .mermaid::after {
  content: '';
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 30px;
  background: linear-gradient(to right, transparent, var(--background-secondary));
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.2s ease;
}

/* Show fade when content overflows */
.markdown-preview-view .mermaid:hover::after {
  opacity: 0.7;
}

/* ═══════════════════════════════════════════════════════════
   SECTION 5: Interactive Improvements
   Better hover states for exploring diagrams
   ═══════════════════════════════════════════════════════════ */

/* Smooth scrolling in container */
.mermaid {
  scroll-behavior: smooth;
}

/* Highlight nodes on hover for better navigation */
.mermaid .node:hover rect  {
  filter: brightness(1.1) !important;
  cursor: pointer !important;
}
.mermaid .node:hover circle {
  filter: brightness(1.1) !important;
  cursor: pointer !important;
}
.mermaid .node:hover polygon {
  filter: brightness(1.1) !important;
  cursor: pointer !important;
}

/* ═══════════════════════════════════════════════════════════
   SECTION 6: Dark Mode Optimizations
   Better contrast in dark themes
   ═══════════════════════════════════════════════════════════ */

.theme-dark .mermaid {
  /* Slightly boost contrast in dark mode */
  filter: contrast(1.05);
}

.theme-dark .mermaid text {
  fill: var(--text-normal) !important;
}

/* ═══════════════════════════════════════════════════════════
   SECTION 7: Full-Width Mode (Optional)
   Uncomment below for charts that span entire note width
   ═══════════════════════════════════════════════════════════ */


.markdown-preview-view .mermaid {
  position: relative;
  left: 50%;
  right: 50%;
  margin-left: -50vw;
  margin-right: -50vw;
  width: 100vw !important;
  max-width: 100vw !important;
  padding: 2rem;
}
/* ══════════════════════════════════════════════════════════
   SECTION 8: ADDITIONAL MERMAID STYLING
   Customize Mermaid diagram elements for better aesthetics
   ══════════════════════════════════════════════════════════ */

/* Mermaid text elements */
.theme-dark .mermaid text {
  fill: #970000ff !important;        /* Match theme text */
}

/* Mermaid node backgrounds */
.theme-dark .mermaid rect,
.theme-dark .mermaid circle {
  fill: var(--background-secondary) !important;
  stroke: var(--color-accent) !important;     /* Purple stroke */
}

/* Mermaid connections/arrows */
.theme-dark .mermaid path,
.theme-dark .mermaid line {
  stroke: var(--color-accent) !important;     /* Purple lines */
}

/* ══════════════════════════════════════════════════════════
   MERMAID SPECIFIC DIAGRAM TYPES
   Flowcharts, sequence diagrams, etc.
   ══════════════════════════════════════════════════════════ */

/* Flowchart nodes */
.theme-dark .mermaid .node rect {
  fill: rgba(229, 0, 0, 0.1) !important;    /* Purple tint */
  stroke: #E50000 !important;                 /* Purple border */
  stroke-width: 2px;
}

/* Sequence diagram boxes */
.theme-dark .mermaid .actor {
  fill: var(--background-secondary) !important;
  stroke: #E50000 !important;                 /* Gold border */
}

/* ══════════════════════════════════════════════════════════
   USAGE INSTRUCTIONS
   ══════════════════════════════════════════════════════════

   HOW TO RESIZE:
   1. Hover over the Mermaid diagram
   2. Use your mouse scroll wheel or trackpad to zoom in/out
   3. Alternatively, adjust the 'transform: scale(X);' value
      in SECTION 2 of this CSS snippet to set a default size

   NOTES:
   - Complex diagrams may still require horizontal scrolling
   - Adjust font sizes in SECTION 3 for better readability
   - Dark mode styles are included in SECTION 6 for better contrast
    - Uncomment SECTION 7 for full-width diagrams if desired
    - Remember to save and refresh your Obsidian vault after
      making changes to this CSS snippet
    SCROLLING::after
    - If diagram exceeds container size, scrollbars appear
    - Use mouse wheel or scrollbar to navigate
*/

/* ══════════════════════════════════════════════════════════
   SVG DIAGRAM
   Internal diagram scaling
   ══════════════════════════════════════════════════════════ */

/*
 * Ensures the diagram scales WITH the container as you drag
 */
.mermaid svg {
  width: auto !important;
  height: auto !important;
  max-width: none !important;                 /* Remove default caps */
}

/* ══════════════════════════════════════════════════════════
   MERMAID CONTAINER
   Main wrapper for diagram
   ══════════════════════════════════════════════════════════ */

.mermaid {
  /* ─────────────────────────────────────────
     ENABLE DRAG RESIZING
     ───────────────────────────────────────── */
  resize: both !important;                    /* Adds drag handle bottom-right */
  overflow: auto !important;                  /* Required for resize to work */

  /* ─────────────────────────────────────────
  VISUAL CUES
  ───────────────────────────────────────── */
border: 1px dashed var(--background-modifier-border); /* Faint border */
background-color: var(--background-primary-alt);
padding: 10px;
margin: 1rem auto;                          /* Center container itself */

    
    /* ─────────────────────────────────────────
         SMOOTH TRANSITIONS
         ───────────────────────────────────────── */
    transition: box-shadow 0.2s ease;
    }
    .node rect, .node circle, .node polygon {
      fill: #121212 !important; stroke: #DC2626 !important; stroke-width: 2px !important;
    }
    .edgePath .path { stroke: #6B7280 !important; stroke-width: 2px !important; }
    .marker { fill: #DC2626 !important; stroke: #DC2626 !important; }
    .label { color: #E5E7EB !important; font-family: "JetBrains Mono" !important; }
/* ══════════════════════════════════════════════════════════
   HOVER EFFECTS
    Visual feedback when interacting
    ══════════════════════════════════════════════════════════ */
    

.mermaid:hover {
  box-shadow: 0 0 25px rgba(0, 0, 0, 0.2);    /* Lift effect */
  border-color: var(--text-accent);          
  /*Adjust Color of Arrow*/
 border-color: #970000ff;           /* Highlight border (red) */
}

/* [FROM: __v4d3r-mermaid.css & mermaid-chart-enhancer.css] */
.mermaid {
  background-color: var(--background-primary-alt);
  border: 1px dashed var(--background-modifier-border);
  padding: 10px; margin: 1rem auto;
  resize: both !important; overflow: auto !important;
  display: flex !important; justify-content: center; align-items: center;
}
.mermaid svg { width: auto !important; height: auto !important; max-width: none !important; }
.mermaid:hover {
  box-shadow: 0 0 25px rgba(0, 0, 0, 0.2);
  border-color: #970000ff; /* Red Arrow Highlight */
}
/* Node Styling */
.mermaid .node rect, .mermaid .node circle, .mermaid .node polygon {
  fill: #121212 !important; stroke: #DC2626 !important; stroke-width: 2px !important;
}
.mermaid .edgePath .path { stroke: #6B7280 !important; stroke-width: 2px !important; }
.mermaid .marker { fill: #DC2626 !important; stroke: #DC2626 !important; }
.mermaid .label { color: #E5E7EB !important; font-family: "JetBrains Mono" !important; }

/* [FROM: __v4d3r-tables.css] */
.markdown-rendered table {
  width: 100%; border-collapse: collapse; margin: 1em 0;
  background: #1A1A1A; border: 1px solid #2d2d2d; border-radius: 8px; overflow: hidden;
}
.markdown-rendered th {
  background: linear-gradient(135deg, #5c1420, #7F1D1D);
  color: #F3F4F6; font-weight: 600; padding: 12px 16px;
  border-bottom: 2px solid #e93147;
  text-transform: uppercase; letter-spacing: 0.05em;
}
.markdown-rendered td { padding: 10px 16px; border-bottom: 1px solid #252525; color: #D1D5DB; }
.markdown-rendered tr:nth-child(even) { background: #1a1a1a; }
.markdown-rendered tr:hover { background: rgba(220, 38, 38, 0.15) !important; }

/* [FROM: __v4d3r-plugins.css & _dataview.css] */
/* Dataview Tables */
.dataview.table-view-table { background: #1A1A1A; border: 1px solid #2d2d2d; border-radius: 8px; }
.dataview.table-view-table th { background: #5c1420; color: #F3F4F6; border-bottom: 2px solid #e93147; }
/* Inline Fields */
.theme-dark .dataview.inline-field-key {
  color: #000000ff !important; font-weight: 600!important; text-transform: uppercase;
  background: #ff0000ff !important; /* Bright Red Background for Key */
  padding: 2px 6px; border-radius: 4px 0 0 4px;
}
.theme-dark .dataview.inline-field-value {
  color: #979797ff !important; background: #212121ff !important;
  padding: 2px 6px !important; border-radius: 0 4px 4px 0;
}
/* Checkboxes */
.markdown-preview-view input[type="checkbox"] {
  appearance: none; -webkit-appearance: none; width: 18px; height: 18px;
  border: 2px solid #2d2d2d; border-radius: 4px; background: #121212;
}
.markdown-preview-view input[type="checkbox"]:checked {
  background: #e93147; border-color: #e93147;
}
.markdown-preview-view input[type="checkbox"]:checked::after {
  content: '✓'; position: absolute; color: #F3F4F6; font-size: 14px; top: -2px; left: 2px;
}
