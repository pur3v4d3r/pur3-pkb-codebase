# Repomix Helper Script
# Usage: .\repomix-helper.ps1 [profile]
# Profiles: notes, library, codebase, project, full, custom

param(
    [Parameter(Position=0)]
    [ValidateSet('notes', 'library', 'codebase', 'project', 'full', 'custom')]
    [string]$Profile = 'notes',

    [Parameter(Position=1)]
    [string]$CustomPath = ""
)

Write-Host "üîß Repomix Helper - Generating $Profile package..." -ForegroundColor Cyan

switch ($Profile) {
    'notes' {
        Write-Host "üìù Packing: Personal notes only (no library, no archives)" -ForegroundColor Green
        repomix --config repomix.config.notes-only.json
    }
    'library' {
        Write-Host "üìö Packing: Library/reference materials" -ForegroundColor Green
        repomix --config repomix.config.library.json
    }
    'codebase' {
        Write-Host "üíª Packing: Codebase from 999-codebas+pkb/" -ForegroundColor Green
        repomix --config repomix.config.codebase.json
    }
    'project' {
        Write-Host "üéØ Packing: Specific project" -ForegroundColor Green
        repomix --config repomix.config.specific-project.json
    }
    'full' {
        Write-Host "‚ö†Ô∏è  WARNING: Packing EVERYTHING (may be very large!)" -ForegroundColor Yellow
        $confirm = Read-Host "This may create a huge file. Continue? (yes/no)"
        if ($confirm -eq 'yes') {
            repomix --output "99_Outputs/repomix-full.txt" --style markdown
        } else {
            Write-Host "‚ùå Cancelled" -ForegroundColor Red
            exit
        }
    }
    'custom' {
        if ($CustomPath -eq "") {
            Write-Host "‚ùå Please provide a path: .\repomix-helper.ps1 custom 'path/to/folder'" -ForegroundColor Red
            exit
        }
        Write-Host "üé® Packing: Custom path - $CustomPath" -ForegroundColor Green
        repomix --output "99_Outputs/repomix-custom.txt" --style markdown $CustomPath
    }
}

Write-Host "`n‚úÖ Done! Check 99_Outputs/ for your file" -ForegroundColor Green
Write-Host "üí° Tip: Files are ignored by Obsidian and git automatically" -ForegroundColor Gray
